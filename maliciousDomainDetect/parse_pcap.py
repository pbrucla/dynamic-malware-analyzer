#!/usr/bin/python3

import pyshark
OWN_IP_ADDR = '10.0.2.15'
def extract_ip_addresses(pcap_file):
    source_addrs = set()
    dest_addrs = set()
    cap = pyshark.FileCapture(pcap_file)

    for packet in cap:
        if 'IP' in packet:
            ip_src = packet.ip.src
            ip_dest = packet.ip.dst
            if ip_src != OWN_IP_ADDR:
                source_addrs.add(ip_src)
            if ip_dest != OWN_IP_ADDR:
                dest_addrs.add(ip_dest)

    return source_addrs, dest_addrs



if __name__ == '__main__':
    pcap_file = 'commands.pcap'
    source_addrs, dest_addrs = extract_ip_addresses(pcap_file)
    print(source_addrs)
    print(dest_addrs)
            
